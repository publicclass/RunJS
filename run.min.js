/*!
 * RunJS 0.3.1
 * (c) 2012 Robert Sk√∂ld <robert@publicclass.se>
 * MIT Licensed
 */(function(e){function n(e,i){if(!i&&typeof e=="object"){for(var s in e)n(s,e[s]);return}if(!i&&typeof e=="string"){var o=0;for(var u=0,a=t.length;u<a;u++){var s=t[u];s.name===e&&(o+=s.match(n.sequence))}return n.sequence++,o}if(!i&&!e){var o=0;for(var u=0,a=t.length;u<a;u++)o+=n(t[u].name);return o}t.push(new r(e,i))}function r(e,t){!t&&typeof e=="function"&&(t=e,e=/^.*$/),this.name=e.source||e,this.callback=t||function(){},typeof e=="string"&&e.charAt()=="/"?this.pathname=this.path(e):typeof e=="object"&&e instanceof RegExp?this.pathname=e:typeof e=="string"&&(this.selector=e)}var t=[];n.again=function(t,r){return e(t).data("run:"+t,n.sequence),r?n(t):0},n.sequence=0,n.routes=t,r.prototype.path=function(e){return e instanceof RegExp?e:(e=e.concat("/?").replace(/\(([^)]+)\)/g,"(?:$1)?").replace(/:(\w+)/g,"([^/]+)").replace(/([\/.])/g,"\\$1").replace(/\*(\w+)?/g,"(.+)"),new RegExp("^"+e+"$","i"))},r.prototype.match=function(t){if(this.selector){var n=this.selector,r="run:"+n,i=e(n).filter(function(){return(e(this).data(r)||0)==t}).data(r,t);if(i.length)return this.callback.call(i),1}else if(this.pathname){var s,o=window.location,u=o.hash.slice(0,2)==="#!"?o.hash.slice(2):o.pathname;if(s=this.pathname.exec(u))return this.callback.apply(i,s.concat(s.shift())),1}return 0},e.run=n,e(function(){n()})})(jQuery);