/*!
 * RunJS 0.3.0
 * (c) 2012 Robert Sk√∂ld <robert@publicclass.se>
 * MIT Licensed
 */(function(e){function n(e,i){if(!i&&typeof e=="object"){for(var s in e)n(s,e[s]);return}if(!i&&typeof e=="string"){var o=0;for(var u=0,a=t.length;u<a;u++){var s=t[u];s.name===e&&(o+=s.match())}return o}if(!i&&!e){var o=0;for(var u=0,a=t.length;u<a;u++)o+=n(t[u].name);return o}t.push(new r(e,i))}function r(e,t){!t&&typeof e=="function"&&(t=e,e=/^.*$/),this.name=e.source||e,this.callback=t||function(){},typeof e=="string"&&e.charAt()=="/"?this.pathname=this.path(e):typeof e=="object"&&e instanceof RegExp?this.pathname=e:typeof e=="string"&&(this.selector=e)}var t=[];n.again=function(t,r){return e(t).removeData("run:"+t),r?n(t):0},n.routes=t,r.prototype.path=function(e){return e instanceof RegExp?e:(e=e.concat("/?").replace(/\(([^)]+)\)/g,"(?:$1)?").replace(/:(\w+)/g,"([^/]+)").replace(/([\/.])/g,"\\$1").replace(/\*(\w+)?/g,"(.+)"),new RegExp("^"+e+"$","i"))},r.prototype.match=function(){if(this.selector){var t=this.selector,n=e(t).filter(function(){return!e(this).data("run:"+t)}).data("run:"+t,!0);if(n.length)return this.callback.call(n),1}else if(this.pathname){var r,i=window.location,s=i.hash.slice(0,2)==="#!"?i.hash.slice(2):i.pathname;if(r=this.pathname.exec(s))return this.callback.apply(n,r.concat(r.shift())),1}return 0},e.run=n,e(function(){n()})})(jQuery);