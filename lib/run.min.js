/*!
 * RunJS
 * Copyright(c) 2011 Robert Sk√∂ld <robert@publicclass.se>
 * MIT Licensed
 */
(function(a){function c(){if(arguments.length==1&&typeof arguments[0]=="object")for(var d in arguments[0])c(d,arguments[0][d]);else{var d=arguments[0],e=arguments[1];if(arguments.length==1&&typeof d=="string"){var f=0;for(var g=0;g<b.length;g++){var h=b[g];if(h.route!==d)continue;if("selector"in h){var i=a(h.selector);i.length&&(h.callback.call(i),f++)}else if("pathname"in h){var j,k=window.location.hash.slice(0,2)=="#!"?window.location.hash.slice(2):window.location.pathname;if(j=h.pathname.exec(k))h.callback.apply(i,j.concat(j.shift())),f++}}return f}if(arguments.length==0){var f=0;for(var g=0;g<b.length;g++)f+=c(b[g].route);return f}var l=d.charAt()=="/";if(l){var k=d.concat("/?").replace(/\(([^)]+)\)/,"(?:$1)?").replace(/:(\w+)/,"([^/]+)").replace(/([\/.])/g,"\\$1").replace(/\*(\w+)?/g,"(.+)");b.push({route:d,pathname:new RegExp("^"+k+"$","i"),callback:e})}else b.push({route:d,selector:d,callback:e})}}var b=[];a.run=c,a.run._routes=b,a(function(){c()})})(jQuery)